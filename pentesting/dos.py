import requests

K = int(input("How many requests?\n"))
distributed = int(input("Distributed? (1=yes, 0=no)\n")) > 0
HUNDRED_PERCENT_OF_K = int(K * 0.01)

print(f"Submitting {K} GET requests...")

if distributed:
    for i in range(K):
        if i % HUNDRED_PERCENT_OF_K == 0:
            print(f"[{i}/{K}]")
        packet = f"srcIp=123{i}&destIp=456&srcPort=5173"
        requests.post(
            f"http://localhost:8080/api/auth/login?{packet}",
            json={"email": "admin@sbnz.com", "password": "admin123"},
        )
else:
    for i in range(K):
        if i % HUNDRED_PERCENT_OF_K == 0:
            print(f"[{i}/{K}]")
        packet = "srcIp=123&destIp=456&srcPort=5173"
        requests.post(
            f"http://localhost:8080/api/auth/login?{packet}",
            json={"email": "admin@sbnz.com", "password": "admin123"},
        )

print("Finished attack")
