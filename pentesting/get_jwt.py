import requests

print("Accessing admin endpoint as regular user:")

packet = "srcIp=123&destIp=123&srcPort=5173"
resp = requests.post(
    f"http://localhost:8080/api/auth/login?{packet}",
    json={"email": "john@gmail.com", "password": "john123"},
)
print(resp.status_code, resp.content.decode())
jwt = resp.content.decode()
header = {"Authorization": f"Bearer {jwt}"}

resp = requests.get(f"http://localhost:8080/api/test/admin?{packet}", headers=header)
print(resp.status_code, resp.content.decode())

################################################################################

print("Accessing admin endpoint as admin:")

packet = "srcIp=123&destIp=123&srcPort=5173"
resp = requests.post(
    f"http://localhost:8080/api/auth/login?{packet}",
    json={"email": "admin@sbnz.com", "password": "admin123"},
)
print(resp.status_code, resp.content.decode())
jwt = resp.content.decode()
header = {"Authorization": f"Bearer {jwt}"}

resp = requests.get(f"http://localhost:8080/api/test/admin?{packet}", headers=header)
print(resp.status_code, resp.content.decode())
